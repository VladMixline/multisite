import { useEffect, useRef, useState } from 'react'
import { Link } from 'react-router-dom'
import { markChapterViewed, markTestCompleted } from '../utils/progressTracker'
import './Chapter1.css'

function Chapter1() {
  useEffect(() => {
    markChapterViewed('chapter1')
  }, [])
  const [showQuestions, setShowQuestions] = useState(false)
  const [isTestOpen, setIsTestOpen] = useState(false)
  const [isMusicPlaying, setIsMusicPlaying] = useState(false)
  const [selectedAnswers, setSelectedAnswers] = useState({})
  const [showResults, setShowResults] = useState(false)
  const [shuffledOptionsByQuestionId, setShuffledOptionsByQuestionId] = useState({})
  const audioRef = useRef({ audioContext: null, oscillator: null })
  
  const questions = [
    "–ß—Ç–æ —Ç–∞–∫–æ–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å —è–∑—ã–∫–∞?",
    "–ß—Ç–æ —Ç–∞–∫–æ–µ —Å–µ–º–∞–Ω—Ç–∏–∫–∞ —è–∑—ã–∫–∞?",
    "–ß—Ç–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≥—Ä–∞–º–º–∞—Ç–∏–∫–∞ —è–∑—ã–∫–∞?",
    "–ß—Ç–æ —Ç–∞–∫–æ–µ —Ñ–æ—Ä–º–∞–ª—å–Ω—ã–π —è–∑—ã–∫?",
    "–î–ª—è —á–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –¥–µ—Ä–µ–≤—å—è?",
    "–ö–∞–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç—Ä–∞–Ω—Å–ª—è—Ç–æ—Ä, —É –∫–æ—Ç–æ—Ä–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ ‚Äì –ø–µ—Ä–µ–≤–æ–¥ –ø—Ä–æ–≥—Ä–∞–º–º—ã —Å —è–∑—ã–∫–∞ –Ω–∏–∑–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è –≤ –º–∞—à–∏–Ω–Ω—ã–µ –∫–æ–¥—ã?"
  ]

  const testQuestions = [
    {
      id: 1,
      question: '–ß—Ç–æ —Ç–∞–∫–æ–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å —è–∑—ã–∫–∞?',
      options: {
        '–∞': '–ù–∞–±–æ—Ä –∫–æ–º–∞–Ω–¥ –º–∞—à–∏–Ω–Ω–æ–≥–æ –∫–æ–¥–∞',
        '–±': '–ü—Ä–∞–≤–∏–ª–∞ –∑–∞–ø–∏—Å–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π —è–∑—ã–∫–∞',
        '–≤': '–ó–Ω–∞—á–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –∏ –≤—ã—Ä–∞–∂–µ–Ω–∏–π',
        '–≥': '–°–ø–æ—Å–æ–± –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã',
      },
      correct: '–±',
    },
    {
      id: 2,
      question: '–ß—Ç–æ –∏–∑ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω–æ–≥–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –≥—Ä–∞–º–º–∞—Ç–∏–∫–∞ —è–∑—ã–∫–∞?',
      options: {
        '–∞': '–°–µ–º–∞–Ω—Ç–∏–∫—É –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤',
        '–±': '–ê–ª–≥–æ—Ä–∏—Ç–º—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã',
        '–≤': '–°–∏–Ω—Ç–∞–∫—Å–∏—Å —è–∑—ã–∫–∞',
        '–≥': '–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –∫–æ–¥–∞',
      },
      correct: '–≤',
    },
    {
      id: 3,
      question: '–ö–∞–∫ —Ñ–æ—Ä–º–∞–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≥—Ä–∞–º–º–∞—Ç–∏–∫–∞ —è–∑—ã–∫–∞?',
      options: {
        '–∞': '–ö–∞–∫ —Ç—Ä–æ–π–∫–∞ (A, B, C)',
        '–±': '–ö–∞–∫ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤ –∞–ª—Ñ–∞–≤–∏—Ç–∞',
        '–≤': '–ö–∞–∫ —á–µ—Ç–≤—ë—Ä–∫–∞ (N, T, P, S)',
        '–≥': '–ö–∞–∫ –Ω–∞–±–æ—Ä –º–∞—à–∏–Ω–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π',
      },
      correct: '–≤',
    },
    {
      id: 4,
      question: '–ö–∞–∫–∞—è –≥—Ä–∞–º–º–∞—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —è–∑—ã–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è?',
      options: {
        '–∞': '–†–µ–≥—É–ª—è—Ä–Ω–∞—è',
        '–±': '–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ-–∑–∞–≤–∏—Å–∏–º–∞—è',
        '–≤': '–ì—Ä–∞–º–º–∞—Ç–∏–∫–∞ –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π',
        '–≥': '–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ-—Å–≤–æ–±–æ–¥–Ω–∞—è',
      },
      correct: '–≥',
    },
    {
      id: 5,
      question: '–î–ª—è —á–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –¥–µ—Ä–µ–≤—å—è?',
      options: {
        '–∞': '–î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–∞—à–∏–Ω–Ω–æ–≥–æ –∫–æ–¥–∞',
        '–±': '–î–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —è–∑—ã–∫–∞',
        '–≤': '–î–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã',
        '–≥': '–î–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–∞–º—è—Ç–∏',
      },
      correct: '–±',
    },
  ]

  const shuffleArray = (arr) => {
    const a = [...arr]
    for (let i = a.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1))
      ;[a[i], a[j]] = [a[j], a[i]]
    }
    return a
  }

  const openTest = () => {
    setSelectedAnswers({})
    setShowResults(false)
    setIsTestOpen(true)

    const shuffled = {}
    testQuestions.forEach((q) => {
      shuffled[q.id] = shuffleArray(Object.entries(q.options))
    })
    setShuffledOptionsByQuestionId(shuffled)
  }

  const stopMusic = () => {
    const { oscillator, audioContext } = audioRef.current || {}
    try {
      if (oscillator) oscillator.stop()
    } catch {
      // ignore
    }
    try {
      if (audioContext) audioContext.close()
    } catch {
      // ignore
    }
    audioRef.current = { audioContext: null, oscillator: null }
    setIsMusicPlaying(false)
  }

  const startMusic = async () => {
    try {
      const audioContext = new (window.AudioContext || window.webkitAudioContext)()
      const oscillator = audioContext.createOscillator()
      const gainNode = audioContext.createGain()

      oscillator.connect(gainNode)
      gainNode.connect(audioContext.destination)

      oscillator.frequency.value = 220
      oscillator.type = 'sine'
      gainNode.gain.value = 0.03

      oscillator.start()
      audioRef.current = { audioContext, oscillator }
      setIsMusicPlaying(true)
    } catch (e) {
      console.log('Audio not supported', e)
    }
  }

  const handleMusicToggle = () => {
    if (isMusicPlaying) {
      stopMusic()
      return
    }
    startMusic()
  }

  const handleAnswerSelect = (questionId, answer) => {
    setSelectedAnswers((prev) => ({
      ...prev,
      [questionId]: answer,
    }))
  }

  const handleSubmitTest = () => {
    setShowResults(true)
    const score = getScore()
    markTestCompleted('chapter1', score, testQuestions.length)
  }

  const handleCloseTest = () => {
    setIsTestOpen(false)
    setShowResults(false)
    setSelectedAnswers({})
    setShuffledOptionsByQuestionId({})
    stopMusic()
  }

  const getScore = () => {
    let correct = 0
    testQuestions.forEach((q) => {
      if (selectedAnswers[q.id] === q.correct) {
        correct++
      }
    })
    return correct
  }

  useEffect(() => {
    return () => stopMusic()
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [])

  return (
    <div className="chapter1">
      <div className="container">
        <nav className="breadcrumb">
          <Link to="/">–ì–ª–∞–≤–Ω–∞—è</Link> / –¢–ï–û–†–ò–Ø –§–û–†–ú–ê–õ–¨–ù–´–• –ì–†–ê–ú–ú–ê–¢–ò–ö –ò –Ø–ó–´–ö–û–í
        </nav>
        
        <h1>–¢–ï–û–†–ò–Ø –§–û–†–ú–ê–õ–¨–ù–´–• –ì–†–ê–ú–ú–ê–¢–ò–ö –ò –Ø–ó–´–ö–û–í</h1>
        
        <div className="chapter-plan">
          <h2>–ü–ª–∞–Ω:</h2>
          <ol>
            <li>–ì—Ä–∞–º–º–∞—Ç–∏–∫–∞.</li>
            <li>–§–æ—Ä–º–∞–ª—å–Ω—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏ –∏ —è–∑—ã–∫–∞.</li>
            <li>–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –≥—Ä–∞–º–º–∞—Ç–∏–∫.</li>
            <li>–°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –¥–µ—Ä–µ–≤—å—è.</li>
          </ol>
          <p className="keywords">
            <strong>–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞:</strong> —Å–∏–Ω—Ç–∞–∫—Å–∏—Å —è–∑—ã–∫–∞, —Å–µ–º–∞–Ω—Ç–∏–∫–∞ —è–∑—ã–∫–∞, –≥—Ä–∞–º–º–∞—Ç–∏–∫–∞, —Ñ–æ—Ä–º–∞–ª—å–Ω—ã–π —è–∑—ã–∫, —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–π —è–∑—ã–∫.
          </p>
        </div>

        <section className="chapter-section">
          <h2>1.1. –ì–†–ê–ú–ú–ê–¢–ò–ö–ê</h2>
          <p>
            –ì—Ä–∞–º–º–∞—Ç–∏–∫–∞ —è–∑—ã–∫–∞ —è–≤–ª—è–µ—Ç—Å—è —Ñ–æ—Ä–º–∞–ª—å–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –µ–≥–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –∏–ª–∏ —Ñ–æ—Ä–º—ã, –≤ –∫–æ—Ç–æ—Ä–æ–π –∑–∞–ø–∏—Å–∞–Ω—ã –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏–ª–∏ –≤—Å—è –ø—Ä–æ–≥—Ä–∞–º–º–∞. –ì—Ä–∞–º–º–∞—Ç–∏–∫–∞ –Ω–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å–µ–º–∞–Ω—Ç–∏–∫—É –∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π.
          </p>
          <p>
            –í –∫–∞—á–µ—Å—Ç–≤–µ –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–∞–∑–Ω–∏—Ü—ã –º–µ–∂–¥—É —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–æ–º –∏ —Å–µ–º–∞–Ω—Ç–∏–∫–æ–π —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –¥–≤–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:
          </p>
          <p className="code-example">
            i := j + k –∏ i := x + y ,
          </p>
          <p>
            –≥–¥–µ x, y —è–≤–ª—è—é—Ç—Å—è –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏, –∞ i, j, k —Ü–µ–ª—ã–º–∏.
          </p>
          <p>
            –≠—Ç–∏ –¥–≤–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å. –û–±–∞ —è–≤–ª—è—é—Ç—Å—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è. –ù–æ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Å–µ–º–∞–Ω—Ç–∏–∫–∏, —ç—Ç–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Ä–∞–∑–Ω—ã–µ, —Ç–∞–∫ –∫–∞–∫ –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –≤ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –º–∞—à–∏–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥.
          </p>
          <p>
            –í –ø–µ—Ä–≤–æ–º —Å–ª—É—á–∞–µ —Å–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è —Ü–µ–ª—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ j –∏ k –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π i.
          </p>
          <p>
            –í–æ –≤—Ç–æ—Ä–æ–º —Å–ª—É—á–∞–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–ª–æ–∂–∏—Ç—å –≤–µ—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ x –∏ y, –∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –∫ —Ü–µ–ª–æ–º—É –≤–∏–¥—É –∏ –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏—Å–≤–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π i.
          </p>
          <p>
            –í –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–∞ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É –Ω–∞ —è–∑—ã–∫–µ –ü–∞—Å–∫–∞–ª—å, –∏–∑–æ–±—Ä–∞–∂—ë–Ω–Ω—É—é –Ω–∞ —Ä–∏—Å. 1, –æ–¥–Ω–∞–∫–æ –æ–±—Å—É–∂–¥–∞–µ–º—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –∏ –ø–æ–¥—Ö–æ–¥—ã –ø—Ä–∏–ª–æ–∂–∏–º—ã –∏ –∫ –¥—Ä—É–≥–∏–º —è–∑—ã–∫–∞–º. –°—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º –∑–∞–ø–∏—Å–∏ –≥—Ä–∞–º–º–∞—Ç–∏–∫, —Å—Ä–µ–¥–∏ –∫–æ—Ç–æ—Ä—ã—Ö –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ñ–æ—Ä–º—É –ë–µ–∫—É—Å–∞‚Äì–ù–∞—É—Ä–∞ (–ë–ù–§). –ë–ù–§ –Ω–µ —Å–∞–º–æ–µ –º–æ—â–Ω–æ–µ –∏–∑ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ –æ–ø–∏—Å–∞–Ω–∏—è —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞. –û–¥–Ω–∞–∫–æ —ç—Ç–∞ —Ñ–æ—Ä–º–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–∞, —à–∏—Ä–æ–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–µ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å—Ä–µ–¥—Å—Ç–≤–∞.
          </p>
          <p>
            –ù–∞ —Ä–∏—Å. 2 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∞ –æ–¥–Ω–∞ –∏–∑ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –≥—Ä–∞–º–º–∞—Ç–∏–∫ –ë–ù–§ –¥–ª—è –æ—á–µ–Ω—å —É–∑–∫–æ–≥–æ –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–∞ —è–∑—ã–∫–∞ –ü–∞—Å–∫–∞–ª—å.
          </p>
          <div className="image-container">
            <img src="/images/—Ä–∏—Å 1.png" alt="–†–∏—Å—É–Ω–æ–∫ 1" className="chapter-image" />
            <p className="image-caption">–†–∏—Å. 1</p>
          </div>
          <p>
            –ì—Ä–∞–º–º–∞—Ç–∏–∫–∞ –ë–ù–§ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ø—Ä–∞–≤–∏–ª –≤—ã–≤–æ–¥–∞, –∫–∞–∂–¥–æ–µ –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –Ω–µ–∫–æ—Ç–æ—Ä–æ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —è–∑—ã–∫–∞. –†–∞—Å—Å–º–æ—Ç—Ä–∏–º, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∞–≤–∏–ª–æ 8 –Ω–∞ —Ä–∏—Å. 2:
          </p>
          <p className="code-example">
            &lt;–ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ&gt; ‚Üí –∏–¥ := &lt;–∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ&gt;
          </p>
          <div className="image-container">
            <img src="/images/—Ä–∏—Å 2.png" alt="–†–∏—Å—É–Ω–æ–∫ 2" className="chapter-image" />
            <p className="image-caption">–†–∏—Å. 2</p>
          </div>
          <p>
            –≠—Ç–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è —è–∑—ã–∫–∞ –ü–ê–°–ö–ê–õ–¨, –æ–±–æ–∑–Ω–∞—á–µ–Ω–Ω–æ–µ –∫–∞–∫ &lt;–ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ&gt;. –°–∏–º–≤–æ–ª "‚Üí" –º–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å –∫–∞–∫ "—è–≤–ª—è–µ—Ç—Å—è –ø–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é". –° –ª–µ–≤–æ–π —Å—Ç–æ—Ä–æ–Ω—ã –æ—Ç —ç—Ç–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –æ–ø—Ä–µ–¥–µ–ª—è–µ–º–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —è–∑—ã–∫–∞ (–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ &lt;–ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ&gt;), –∞ —Å –ø—Ä–∞–≤–æ–π ‚Äì –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ —ç—Ç–æ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏. –°—Ç—Ä–æ–∫–∏ —Å–∏–º–≤–æ–ª–æ–≤, –∑–∞–∫–ª—é—á–µ–Ω–Ω—ã–µ –≤ —É–≥–ª–æ–≤—ã–µ —Å–∫–æ–±–∫–∏, –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è –Ω–µ—Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏. –û–Ω–∏ —Å–æ—Å—Ç–∞–≤–ª—è—é—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –∫–ª–∞—Å—Å—ã —è–∑—ã–∫–∞. –°–∏–º–≤–æ–ª—ã, –Ω–µ –∑–∞–∫–ª—é—á—ë–Ω–Ω—ã–µ –≤ —É–≥–ª–æ–≤—ã–µ —Å–∫–æ–±–∫–∏, –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏. –û–Ω–∏ —Å–æ—Å—Ç–∞–≤–ª—è—é—Ç –ª–µ–∫—Å–∏—á–µ—Å–∫–∏–µ –∫–ª–∞—Å—Å—ã –∏–ª–∏ –∞–ª—Ñ–∞–≤–∏—Ç —è–∑—ã–∫–∞. –í —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º–æ–º –ø—Ä–∏–º–µ—Ä–µ –Ω–µ—Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏ —è–≤–ª—è—é—Ç—Å—è &lt;–ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ&gt; –∏ &lt;–∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ&gt;, –∞ —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–º–∏ ‚Äì –∏–¥ –∏ :=. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —ç—Ç–æ –ø—Ä–∞–≤–∏–ª–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —á—Ç–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è &lt;–ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ&gt; —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ (—Ç–µ—Ä–º–∏–Ω–∞–ª –∏–¥), —Å–∏–º–≤–æ–ª–∞ –∞–ª—Ñ–∞–≤–∏—Ç–∞ :=, –∑–∞ –∫–æ—Ç–æ—Ä—ã–º —Å–ª–µ–¥—É–µ—Ç –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è &lt;–∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ&gt;. –ü—Ä–æ–±–µ–ª—ã –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã –∏ –≤—Å—Ç–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏.
          </p>
          <p>
            –î–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –Ω–µ—Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ &lt;–ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ&gt; –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ, —á—Ç–æ–±—ã —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è –Ω–µ—Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ &lt;–∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ&gt;. –≠—Ç–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–∞—ë—Ç—Å—è –ø—Ä–∞–≤–∏–ª–æ–º 9 –Ω–∞ —Ä–∏—Å. 2:
          </p>
          <p className="code-example">
            &lt;–∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ&gt; ‚Üí &lt;—Å–ª–∞–≥–∞–µ–º–æ–µ&gt;/&lt;–∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ&gt; +/- &lt;—Å–ª–∞–≥–∞–µ–º–æ–µ&gt;
          </p>
          <p>
            –≠—Ç–æ –ø—Ä–∞–≤–∏–ª–æ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –¥–≤–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, —Ä–∞–∑–¥–µ–ª—ë–Ω–Ω—ã–µ —Å–∏–º–≤–æ–ª–æ–º /. –ü–µ—Ä–≤–∞—è —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ç–æ–º, —á—Ç–æ &lt;–∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ&gt; —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –æ–¥–Ω–æ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ &lt;—Å–ª–∞–≥–∞–µ–º–æ–µ&gt;. –î—Ä—É–≥–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ &lt;–∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ&gt; —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ &lt;–∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ&gt;, –∑–∞ –∫–æ—Ç–æ—Ä—ã–º —Å–ª–µ–¥—É–µ—Ç –∑–Ω–∞–∫ + –∏–ª–∏ ‚Äì, –∑–∞ –∫–æ—Ç–æ—Ä—ã–º —Å–ª–µ–¥—É–µ—Ç –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è &lt;—Å–ª–∞–≥–∞–µ–º–æ–µ&gt;. –≠—Ç–æ –ø—Ä–∞–≤–∏–ª–æ —è–≤–ª—è–µ—Ç—Å—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–º, —Ç.–µ. –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è &lt;–∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ&gt; –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –≤ —Ç–µ—Ä–º–∏–Ω–∞—Ö —Å–µ–±—è —Å–∞–º–æ–π. –í —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —ç—Ç–∏–º –ø—Ä–∞–≤–∏–ª–æ–º –Ω–µ—Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–º —Å–∏–º–≤–æ–ª–æ–º &lt;–∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ&gt; —è–≤–ª—è–µ—Ç—Å—è –ª—é–±–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–∑ –æ–¥–Ω–æ–≥–æ –∏–ª–∏ –±–æ–ª–µ–µ —Å–ª–∞–≥–∞–µ–º—ã—Ö, —Ä–∞–∑–¥–µ–ª—ë–Ω–Ω—ã—Ö –∑–Ω–∞–∫–∞–º–∏ + –∏–ª–∏ ‚Äì.
          </p>
        </section>

        <section className="chapter-section">
          <h2>1.2. –§–û–†–ú–ê–õ–¨–ù–´–ï –û–ü–†–ï–î–ï–õ–ï–ù–ò–Ø –ì–†–ê–ú–ú–ê–¢–ò–ö–ò –Ø–ó–´–ö–ê</h2>
          <p>
            –ü—Ä–µ–∂–¥–µ, —á–µ–º –ø—Ä–∏—Å—Ç—É–ø–∞—Ç—å –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç—Ä–∞–Ω—Å–ª–∏—Ä—É—é—â–∏—Ö –ø—Ä–æ–≥—Ä–∞–º–º, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–æ–Ω—è—Ç–∏—è.
          </p>
          <p>
            –ê–ª—Ñ–∞–≤–∏—Ç —è–∑—ã–∫–∞ ‚Äì –Ω–µ–ø—É—Å—Ç–æ–µ, –∫–æ–Ω–µ—á–Ω–æ–µ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø—É—Å—Ç—å –∞–ª—Ñ–∞–≤–∏—Ç —è–∑—ã–∫–∞ –≤–∫–ª—é—á–∞–µ—Ç —Ç—Ä–∏ —Å–∏–º–≤–æ–ª–∞: {'{'}a, b, c{'}'}.
          </p>
          <p>
            –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ ‚Äì –Ω–µ–ø—É—Å—Ç–æ–µ –∫–æ–Ω–µ—á–Ω–æ–µ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤ –∞–ª—Ñ–∞–≤–∏—Ç–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –∏–∑ —Ç—Ä—ë—Ö —Å–∏–º–≤–æ–ª–æ–≤ –∞–ª—Ñ–∞–≤–∏—Ç–∞ –º—ã –º–æ–∂–µ–º –ø–æ–ª—É—á–∏—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π: aabb, abcc, bac, bca –∏ —Ç.–¥.
          </p>
          <p>
            –ì—Ä–∞–º–º–∞—Ç–∏–∫–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ –≤—ã–≤–æ–¥–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –∏–∑ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö. –§–æ—Ä–º–∞–ª—å–Ω–æ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∞ G –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ —á–µ—Ç–≤—ë—Ä–∫–∞ –æ–±—ä–µ–∫—Ç–æ–≤: (N, T, P, S), –≥–¥–µ N ‚Äì –º–Ω–æ–∂–µ—Å—Ç–≤–æ –Ω–µ—Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤, –æ–±—Ä–∞–∑—É—é—â–µ–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –∫–ª–∞—Å—Å—ã —è–∑—ã–∫–∞; T ‚Äì –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤, –æ–±—Ä–∞–∑—É—é—â–µ–µ –∞–ª—Ñ–∞–≤–∏—Ç —è–∑—ã–∫–∞; P ‚Äì –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–∞–≤–∏–ª –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ —Ñ–æ—Ä–º–µ –ë—ç–∫—É—Å–∞‚Äì–ù–∞—É—Ä–∞); S ‚Äì –Ω–∞—á–∞–ª—å–Ω—ã–π –Ω–µ—Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–π —Å–∏–º–≤–æ–ª –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Ä–∞–∑–±–æ—Ä –ª—é–±–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —è–∑—ã–∫–∞.
          </p>
          <p>
            –Ø–∑—ã–∫–æ–º L –Ω–∞–¥ –≥—Ä–∞–º–º–∞—Ç–∏–∫–æ–π G –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π, —Å–æ—Å—Ç–æ—è—â–∏—Ö –∏–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ T, –≤—ã–≤–æ–¥–∏–º—ã—Ö —Å –ø–æ–º–æ—â—å—é –ø—Ä–∞–≤–∏–ª P, –Ω–∞—á–∏–Ω–∞—è —Å –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –Ω–µ—Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ S.
          </p>
        </section>

        <section className="chapter-section">
          <h2>1.3. –ö–õ–ê–°–°–ò–§–ò–ö–ê–¶–ò–Ø –ì–†–ê–ú–ú–ê–¢–ò–ö</h2>
          <p>
            –û–¥–Ω–∞ –∏–∑ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–π –≥—Ä–∞–º–º–∞—Ç–∏–∫ —Å–≤—è–∑–∞–Ω–∞ —Å –≤–∏–¥–æ–º –ø—Ä–∞–≤–∏–ª –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è P. –ü–æ —ç—Ç–æ–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏ —Ä–∞–∑–¥–µ–ª—è—é—Ç –Ω–∞ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ, –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ-—Å–≤–æ–±–æ–¥–Ω—ã–µ, –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ-–∑–∞–≤–∏—Å–∏–º—ã–µ –∏ –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π.
          </p>
          <p>
            –ì—Ä–∞–º–º–∞—Ç–∏–∫–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–π, –µ—Å–ª–∏ –ø—Ä–∞–≤–∏–ª–∞ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è –∏–º–µ—é—Ç –≤–∏–¥: A‚ÜícB –∏–ª–∏ A‚Üíc, –≥–¥–µ A, B ‚Äì –Ω–µ—Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã; c ‚Äì —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–π —Å–∏–º–≤–æ–ª –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏.
          </p>
          <p className="example">
            <strong>–ü—Ä–∏–º–µ—Ä.</strong> G1=({'{'}'S{'}'}, {'{'}0,1{'}'}, P={'{'}S‚Üí0S/1S/0/1{'}'}, S{'}'}).
          </p>
          <p>
            –ì—Ä–∞–º–º–∞—Ç–∏–∫–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ-—Å–≤–æ–±–æ–¥–Ω–æ–π, –µ—Å–ª–∏ –ø—Ä–∞–≤–∏–ª–∞ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è –∏–º–µ—é—Ç –≤–∏–¥: A‚Üíw, –≥–¥–µ A ‚Äì –Ω–µ—Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–π —Å–∏–º–≤–æ–ª, w‚àà(N‚à™T) ‚Äì –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ—Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã—Ö –∏ —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏.
          </p>
          <p className="example">
            <strong>–ü—Ä–∏–º–µ—Ä.</strong> G2=({'{'}'A,Z{'}'}, {'{'}a,*, +, (, ){'}'}, P={'{'}A‚ÜíZ/A+Z, Z‚Üía/Z*a/(A){'}'}, A{'}'}).
          </p>
          <p>
            –ì—Ä–∞–º–º–∞—Ç–∏–∫–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ-–∑–∞–≤–∏—Å–∏–º–æ–π, –µ—Å–ª–∏ –ø—Ä–∞–≤–∏–ª–∞ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è –∏–º–µ—é—Ç –≤–∏–¥: k‚Üíw, –≥–¥–µ k, w‚àà(N‚à™T) ‚Äì –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ—Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã—Ö –∏ —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏, –ø—Ä–∏—á—ë–º |k|‚â§|w|.
          </p>
          <p className="example">
            <strong>–ü—Ä–∏–º–µ—Ä.</strong> G3=({'{'}'S,B,C{'}'}, {'{'}a,b,c{'}'}, P={'{'}S‚ÜíaSBC/abC, CB‚ÜíBC, bB‚Üíbb, bC‚Üíbc, cC‚Üícc{'}'}, S{'}'}).
          </p>
          <p>
            –ò, –Ω–∞–∫–æ–Ω–µ—Ü, –≥—Ä–∞–º–º–∞—Ç–∏–∫–∞ –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–∏–∫–∞–∫–∏—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –≤ –ø—Ä–∞–≤–∏–ª–∞—Ö –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ, –≤ —Ç–æ–º —á–∏—Å–ª–µ, –¥–æ–ø—É—Å–∫–∞—é—Ç –ø–µ—Ä–µ—Ö–æ–¥ –≤ –ø—É—Å—Ç–æ–µ –º–Ω–æ–∂–µ—Å—Ç–≤–æ.
          </p>
          <p>
            –ì—Ä–∞–º–º–∞—Ç–∏–∫–∞ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —è–∑—ã–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Ç–µ—Ä–º–∏–Ω–∞—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ-—Å–≤–æ–±–æ–¥–Ω—ã—Ö –≥—Ä–∞–º–º–∞—Ç–∏–∫.
          </p>
        </section>

        <section className="chapter-section">
          <h2>1.4. –°–ò–ù–¢–ê–ö–°–ò–ß–ï–°–ö–ò–ï –î–ï–†–ï–í–¨–Ø</h2>
          <p>
            –†–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –≤ —Ç–µ—Ä–º–∏–Ω–∞—Ö –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π —É–¥–æ–±–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å –≤ –≤–∏–¥–µ –¥–µ—Ä–µ–≤–∞. –¢–∞–∫–∏–µ –¥–µ—Ä–µ–≤—å—è –ø—Ä–∏–Ω—è—Ç–æ –Ω–∞–∑—ã–≤–∞—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–º–∏.
          </p>
          <p>
            –ù–∞ —Ä–∏—Å—É–Ω–∫–µ 3, –∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–æ –¥–µ—Ä–µ–≤–æ –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–±–æ—Ä–∞ –¥–ª—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è read(a) —Å –ø–æ–º–æ—â—å—é –ø—Ä–∞–≤–∏–ª 12 –∏ 4 –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π –Ω–∞ —Ä–∏—Å. 2.
          </p>
          <p>
            –ù–∞ —Ä–∏—Å—É–Ω–∫–µ 3, –± –ø—Ä–∏–≤–µ–¥–µ–Ω–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–æ–µ –¥–µ—Ä–µ–≤–æ —Ä–∞–∑–±–æ—Ä–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è rez:=sum div100‚Äìa*a. –≠—Ç–æ –¥–µ—Ä–µ–≤–æ –≤—ã–≤–æ–¥–∏—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –ø—Ä–∞–≤–∏–ª 8, 9, 10, 11 –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π –Ω–∞ —Ä–∏—Å. 2.
          </p>
          <div className="image-container">
            <img src="/images/—Ä–∏—Å 3.png" alt="–†–∏—Å—É–Ω–æ–∫ 3" className="chapter-image" />
            <p className="image-caption">–†–∏—Å. 3</p>
          </div>
          <p>
            –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—è –ø—Ä–∞–≤–∏–ª–∞ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏, –Ω–∞—á–∏–Ω–∞—è —Å –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ, –º–æ–∂–Ω–æ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–æ–µ –¥–µ—Ä–µ–≤–æ –¥–ª—è –≤—Å–µ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π –Ω–∞ —Ä–∏—Å. 1.
          </p>
        </section>

        <div className="questions-section">
          <button 
            className="control-questions-btn"
            onClick={() => setShowQuestions(!showQuestions)}
          >
            {showQuestions ? '‚ñº' : '‚ñ∂'} –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã
          </button>
          
          {showQuestions && (
            <div className="control-questions-content">
              <ul className="questions-list">
                {questions.map((question, index) => (
                  <li key={index}>{question}</li>
                ))}
              </ul>
            </div>
          )}

          <button className="btn test-btn" onClick={openTest}>
            –ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç
          </button>
        </div>

        {isTestOpen && (
          <div className="test-modal-overlay" onClick={handleCloseTest}>
            <div className="test-modal" onClick={(e) => e.stopPropagation()}>
              <div className="test-modal-header">
                <h2>–¢–µ—Å—Ç –ø–æ —Ç–µ–º–µ ¬´–¢–µ–æ—Ä–∏—è —Ñ–æ—Ä–º–∞–ª—å–Ω—ã—Ö –≥—Ä–∞–º–º–∞—Ç–∏–∫ –∏ —è–∑—ã–∫–æ–≤¬ª</h2>
                <button className="close-btn" onClick={handleCloseTest}>√ó</button>
              </div>

              <div className="test-music-control">
                <button
                  className={`music-btn ${isMusicPlaying ? 'playing' : ''}`}
                  onClick={handleMusicToggle}
                >
                  {isMusicPlaying ? 'üîä –ú—É–∑—ã–∫–∞ –≤–∫–ª—é—á–µ–Ω–∞' : 'üîá –ú—É–∑—ã–∫–∞ –≤—ã–∫–ª—é—á–µ–Ω–∞'}
                </button>
              </div>

              <div className="test-content">
                {testQuestions.map((q) => (
                  <div key={q.id} className="test-question">
                    <h3>{q.id}. {q.question}</h3>
                    <div className="test-options">
                      {(shuffledOptionsByQuestionId[q.id] || Object.entries(q.options)).map(([key, value]) => {
                        const isSelected = selectedAnswers[q.id] === key
                        const isCorrect = q.correct === key
                        const showAnswer = showResults
                        return (
                          <label
                            key={key}
                            className={`test-option ${isSelected ? 'selected' : ''} ${showAnswer && isCorrect ? 'correct' : ''} ${showAnswer && isSelected && !isCorrect ? 'incorrect' : ''}`}
                          >
                            <input
                              type="radio"
                              name={`question-${q.id}`}
                              value={key}
                              checked={isSelected}
                              onChange={() => handleAnswerSelect(q.id, key)}
                              disabled={showResults}
                            />
                            <span>{value}</span>
                            {showAnswer && isCorrect && <span className="correct-mark">‚úì –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç</span>}
                          </label>
                        )
                      })}
                    </div>
                  </div>
                ))}
              </div>

              <div className="test-footer">
                {!showResults ? (
                  <button
                    className="btn submit-btn"
                    onClick={handleSubmitTest}
                    disabled={Object.keys(selectedAnswers).length !== testQuestions.length}
                  >
                    –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ç–µ—Å—Ç
                  </button>
                ) : (
                  <div className="test-results">
                    <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞</h3>
                    <p className="test-score">
                      –ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: {getScore()} –∏–∑ {testQuestions.length}
                    </p>
                    <p className="test-percentage">
                      {Math.round((getScore() / testQuestions.length) * 100)}%
                    </p>
                    <button className="btn" onClick={handleCloseTest}>
                      –ó–∞–∫—Ä—ã—Ç—å
                    </button>
                  </div>
                )}
              </div>
            </div>
          </div>
        )}
        
        <div className="chapter-navigation">
          <Link to="/" className="btn">–ù–∞ –≥–ª–∞–≤–Ω—É—é</Link>
        </div>
      </div>
    </div>
  )
}

export default Chapter1

